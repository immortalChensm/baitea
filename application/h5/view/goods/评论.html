<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>评论</title>
    <!--<link rel="stylesheet" href="css/custom.css">-->
    <link rel="stylesheet" href="/public/__STATIC__/h5/plugins/layui/css/layui.css">
    <style>
        body{
            margin:0;
            padding: 0;
        }

        .comment-header{
            height: 50px;
            line-height: 50px;
            position: fixed;
            top: 0;
            width: 100%;
            display: flex;
            z-index: 999;
        }
        .header-tb{
            width: 10%;
        }
        .header-tb img{
            width: 10px;
            height: 19px;
            margin-left: 15px;
            margin-top: 18px;
        }
        .header-title{
            width: 80%;
            text-align: center;
        }
        .comment-cont{
            margin-top: 50px;
        }
        .cont-row{
            padding: 10px 15px;
        }
        .row-top img{
            border-radius: 25px;
            width: 40px;
            height: 40px;
        }
        .row-top label{
            margin-left: 10px;
        }
        .bg1{
            background-color: #ffffff;
        }
        .row-top{
            width: 100%;
            height: 40px;
            line-height: 40px;
            display: flex;
        }
        .row-cont{
            width: 70%;
            position: relative;
        }
        .row-conts{
            width: 30%;
        }
        .row-nr{
            display: flex;
            height: 40px;
            font-size: 14px;
            line-height: 40px;
        }
        .zdy-text-right{
            text-align: right;
        }
        .zdy-color-1{
            color: #9999;
        }
        .zdy-margin-bottom1{
            margin-bottom: 0.3rem;
        }
        .zdy-border-bottom1{
            border-bottom: 1px solid #e5e5e5;
        }
        .zdy-font-size1{
            font-size: 14px;
        }
        .row-xing{
            width: 15px;
            height: 15px;
            position: relative;
            top: 2px;
        }
        .row-goods-pj{
            margin-right: 6px;
        }
        .row-goods-fs{
            position: relative;
            top: 1px;
        }
        .comment-body{
            font-size: 14px;
        }
    </style>
</head>
<body style="background-color: #F2F2F2">
<div class="comment-main">
	<!-- 
     <div class="comment-header bg1 zdy-border-bottom1">
         <div class="header-tb">
             <img src="/public/__STATIC__/h5/images/fh.png" class="">
         </div>
         <div class="header-title">评论</div>
         <div class="header-tb"></div>
     </div>
      -->
     
     <div class="cont-row comment-cont bg1 zdy-border-bottom1 zdy-font-size1">
     
     
         <label class="row-goods-pj">综合评价</label>
         
         <for start="0" end="$info.all.all">
         	<img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
         </for>
         <!--
         <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
         <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
         <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
         <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
           -->
         
         <label class="row-goods-fs">{$info.all.all}</label>
     </div>
     
     
     <div class="comment-wnr " id="commentlist">
     <!-- 
     		<volist name="info.list" id="vo">
     			
		            <div class="cont-row bg1 zdy-margin-bottom1">
		                  <div class="row-top">
		                  		<notempty name="vo.head_pic">
		                  		
		                  		
		                       <img src="{$vo.head_pic}"/>
		                       <else />
		                       <img src="/public/__STATIC__/h5/images/default_head.png"/>
		                       </notempty>
		                       
		                       <label>
		                         {$vo.nickname}
		                       </label>
		                  </div>
		                   <div class="row-nr">
		                       <div class="row-cont">
		                           <label class="row-goods-pj">宝贝评价</label>
		                     
		                           <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
		                           <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
		                           <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
		                           
		                           
		                           
		                           
		                           <img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
		                           
		                            
		                            <for start="0" end="$vo.goods_rank">
		                           		<img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>
		                           	</for>
		                           
		                           
		                           
		                           
		                           
		                           
		                           <label class="row-goods-fs">{$vo.goods_rank}</label>
		                       </div>
		                       <div class="row-conts zdy-text-right zdy-color-1">{$vo.add_time}</div>
		                   </div>
		                    <div class="comment-body">
		                        <label>{$vo.content}</label>
		                    </div>
		            </div>
			</volist>
         -->
     </div>

</div>

<script src="/public/__STATIC__/h5/plugins/layui/layui.js"></script>
<script type="text/javascript">


	layui.use('flow', function(){
		
		
		  var $ = layui.jquery; //不用额外加载jQuery，flow模块本身是有依赖jQuery的，直接用即可。
		  
		  
		  var flow = layui.flow;
		  
		  flow.load({
			  //isAuto:false,
		    elem: '#commentlist' //指定列表容器
		    ,done: function(page=3, next){ //到达临界点（默认滚动触发），触发下一页
		      var lis = [];
		      //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）
		      
		      $.get('/h5/Goods/ajaxcomment?page='+page+"&goods_id={:Request()->param('goods_id')}", function(res){
		    	  if(res=='null')$("#commentlist").text("没有评论数据");
		    	  res = JSON.parse(res);
		        //假设你的列表返回在data集合中
		        //layui.each(res.data, function(index, item){
		        //alert(res.list);
		          var list_data = '';
		          for(var i=0;i<res.list.length;i++){
		        	  
		        	  list_data+='<div class="cont-row bg1 zdy-margin-bottom1">'+
	                  '<div class="row-top">';
	                  
                     
                     if(res.list[i].head_pic){
                    	 list_data+='<img src="http://www.quhechacn.com'+res.list[i].head_pic+'"/>';
                     }else{
                    	 list_data+='<img src="/public/__STATIC__/h5/images/default_head.png"/>';
                     }
                     
                     
                     list_data+='<label>'+res.list[i].nickname+
                     '</label>'+
               '</div>'+
                 '<div class="row-nr">'+
                     '<div class="row-cont">'+
                         '<label class="row-goods-pj">宝贝评价</label><div class="star">';
                         
                          
                          for(var j=0;j<res.list[i].goods_rank;j++){
                        	  list_data+='<img src="/public/__STATIC__/h5/images/xing.png" class="row-xing"/>';
                          }
                          
                         		
                         
                         
                         
                         
                         
                         
                         
                          list_data+='</div><label class="row-goods-fs">'+res.list[i].goods_rank+'</label>'+
                     '</div>'+
                     '<div class="row-conts zdy-text-right zdy-color-1">'+res.list[i].add_time+'</div>'+
                 '</div>'+
                  '<div class="comment-body">'+
                      '<label>'+res.list[i].content+'</label>'+
                  '</div>'+
          '</div>';
		        
		        
		          }
		          lis.push(list_data);
		        //}); 
		        
		        
		        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
		        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
		        next(lis.join(''), page < res.pages);    
		      });
		    }
		  });
		});
	
	
</script>
</body>
</html>